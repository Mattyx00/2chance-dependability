\chapter{Mutation Testing}

\section*{Context: PiTest}

\textbf{Mutation testing}

\vspace{0.3cm}

Within our project, we will use mutation testing thanks to PiTest, which allows us to overcome the limitations of simple coverage (for which we use Jacoco) and identify bugs in the source code.

\vspace{0.4cm}

\textbf{Tool used: pitest}

\vspace{0.2cm}

Pitest was selected as the mutation testing tool, as seen in class.
It allows for easy integration with Maven and supports Junit 5.
The specific working version used in our project is 1.15.0.

\section*{Technical configuration and usage}

Inside our pom.xml, we inserted a Maven profile named pitest that allows executing mutation testing by running the command:

\begin{center}
\texttt{mvn test-compile pitest:mutationCoverage -P pitest}
\end{center}

The tested classes are the beans, the daos, and the services.

\vspace{0.3cm}

For the analysis, we used the standard pitest mutators:
\begin{itemize}
    \item Condition inversion
    \item Return value substitution
    \item Arithmetic operator modification
\end{itemize}

We will find the results in the \texttt{target/pit-reports} folder.

\section*{First results}

The first results highlight poor results regarding tests on daos and services.

\vspace{0.4cm}

\begin{center}
\resizebox{\textwidth}{!}{
\begin{tabular}{|l|c|c|c|c|}
\hline
\textbf{Package Name} & \textbf{Number of Classes} & \textbf{Line Coverage} & \textbf{Mutation Coverage} & \textbf{Test Strength} \\
\hline
model.beans & 9 & 99\% (292/294) & 97\% (136/140) & 97\% (136/140) \\
model.dao & 12 & 55\% (433/788) & 30\% (103/344) & 35\% (103/294) \\
services & 19 & 60\% (339/565) & 45\% (96/214) & 47\% (96/203) \\
\hline
\textbf{PROJECT TOTAL} & 51 & 53\% (1064/1999) & 42\% (335/797) & 52\% (335/637) \\
\hline
\end{tabular}
}
\end{center}

\vspace{0.3cm}

The problem was resolved by increasing the tests and making them more specific.

\section*{Final results}

\vspace{0.4cm}

\begin{center}
\resizebox{\textwidth}{!}{
\begin{tabular}{|l|c|c|c|c|}
\hline
\textbf{Package Name} & \textbf{Number of Classes} & \textbf{Line Coverage} & \textbf{Mutation Coverage} & \textbf{Test Strength} \\
\hline
model.beans & 9 & 99\% (292/294) & 97\% (136/140) & 97\% (136/140) \\
model.dao & 12 & 77\% (606/788) & 50\% (173/344) & 59\% (173/294) \\
services & 19 & 81\% (456/565) & 83\% (177/214) & 87\% (177/203) \\
\hline
\textbf{PROJECT TOTAL} & 51 & 68\% (1354/1999) & 61\% (486/797) & 76\% (486/637) \\
\hline
\end{tabular}
}
\end{center}